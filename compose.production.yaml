
services:

  app:
    image: ghcr.io/insanity54/flowworld:latest
    env_file: .env
    ports:
      - target: 5000 # container port
        published: 9090 # Swarm ingress port
        protocol: tcp
        mode: ingress
    depends_on:
      - db
    entrypoint: npm run start


  db:
    image: postgres:16
    restart: unless-stopped
    env_file: .env
    volumes:
      - pgdata:/var/lib/postgresql/data


volumes:
  pgdata: